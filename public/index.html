<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Multiplayer Tic Tac Toe - Play online with friends or AI">
    <title>Tic Tac Toe - Multiplayer Game</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/themes.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1a1a2e">
</head>
<body>
    <div id="app" class="theme-dark">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1 class="logo">
                    <span class="logo-x">X</span>
                    <span class="logo-divider">|</span>
                    <span class="logo-o">O</span>
                    <span class="logo-text">Tic Tac Toe</span>
                </h1>
                <div class="header-actions">
                    <button id="themeBtn" class="icon-btn" title="Change Theme">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="4"/>
                            <path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M4.93 19.07l1.41-1.41m11.32-11.32l1.41-1.41"/>
                        </svg>
                    </button>
                    <button id="soundBtn" class="icon-btn" title="Toggle Sound">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
                            <path d="M15.54 8.46a5 5 0 0 1 0 7.07"/>
                        </svg>
                    </button>
                    <div class="user-info">
                        <span class="user-points" id="userPoints">0 pts</span>
                        <button id="profileBtn" class="icon-btn">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                                <circle cx="12" cy="7" r="4"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Theme Selector Modal -->
        <div id="themeModal" class="modal hidden">
            <div class="modal-content theme-selector">
                <div class="modal-header">
                    <h2>Choose Your Theme</h2>
                    <button class="close-btn" id="closeThemeModal">&times;</button>
                </div>
                <div class="theme-grid">
                    <div class="theme-option" data-theme="classic">
                        <div class="theme-preview theme-classic">
                            <div class="preview-board">
                                <div class="preview-cell">X</div>
                                <div class="preview-cell">O</div>
                                <div class="preview-cell">X</div>
                            </div>
                        </div>
                        <span class="theme-name">Classic</span>
                    </div>
                    <div class="theme-option" data-theme="dark">
                        <div class="theme-preview theme-dark">
                            <div class="preview-board">
                                <div class="preview-cell">X</div>
                                <div class="preview-cell">O</div>
                                <div class="preview-cell">X</div>
                            </div>
                        </div>
                        <span class="theme-name">Dark Mode</span>
                    </div>
                    <div class="theme-option" data-theme="nature">
                        <div class="theme-preview theme-nature">
                            <div class="preview-board">
                                <div class="preview-cell">X</div>
                                <div class="preview-cell">O</div>
                                <div class="preview-cell">X</div>
                            </div>
                        </div>
                        <span class="theme-name">Nature</span>
                    </div>
                    <div class="theme-option" data-theme="ocean">
                        <div class="theme-preview theme-ocean">
                            <div class="preview-board">
                                <div class="preview-cell">X</div>
                                <div class="preview-cell">O</div>
                                <div class="preview-cell">X</div>
                            </div>
                        </div>
                        <span class="theme-name">Ocean</span>
                    </div>
                    <div class="theme-option" data-theme="neon">
                        <div class="theme-preview theme-neon">
                            <div class="preview-board">
                                <div class="preview-cell">X</div>
                                <div class="preview-cell">O</div>
                                <div class="preview-cell">X</div>
                            </div>
                        </div>
                        <span class="theme-name">Neon</span>
                    </div>
                    <div class="theme-option" data-theme="minimalist">
                        <div class="theme-preview theme-minimalist">
                            <div class="preview-board">
                                <div class="preview-cell">X</div>
                                <div class="preview-cell">O</div>
                                <div class="preview-cell">X</div>
                            </div>
                        </div>
                        <span class="theme-name">Minimalist</span>
                    </div>
                    <div class="theme-option" data-theme="sunset">
                        <div class="theme-preview theme-sunset">
                            <div class="preview-board">
                                <div class="preview-cell">X</div>
                                <div class="preview-cell">O</div>
                                <div class="preview-cell">X</div>
                            </div>
                        </div>
                        <span class="theme-name">Sunset</span>
                    </div>
                    <div class="theme-option" data-theme="cyberpunk">
                        <div class="theme-preview theme-cyberpunk">
                            <div class="preview-board">
                                <div class="preview-cell">X</div>
                                <div class="preview-cell">O</div>
                                <div class="preview-cell">X</div>
                            </div>
                        </div>
                        <span class="theme-name">Cyberpunk</span>
                    </div>
                    <div class="theme-option" data-theme="retro">
                        <div class="theme-preview theme-retro">
                            <div class="preview-board">
                                <div class="preview-cell">X</div>
                                <div class="preview-cell">O</div>
                                <div class="preview-cell">X</div>
                            </div>
                        </div>
                        <span class="theme-name">Retro</span>
                    </div>
                    <div class="theme-option" data-theme="pastel">
                        <div class="theme-preview theme-pastel">
                            <div class="preview-board">
                                <div class="preview-cell">X</div>
                                <div class="preview-cell">O</div>
                                <div class="preview-cell">X</div>
                            </div>
                        </div>
                        <span class="theme-name">Pastel</span>
                    </div>
                    <div class="theme-option" data-theme="forest">
                        <div class="theme-preview theme-forest">
                            <div class="preview-board">
                                <div class="preview-cell">X</div>
                                <div class="preview-cell">O</div>
                                <div class="preview-cell">X</div>
                            </div>
                        </div>
                        <span class="theme-name">Forest</span>
                    </div>
                    <div class="theme-option" data-theme="candy">
                        <div class="theme-preview theme-candy">
                            <div class="preview-board">
                                <div class="preview-cell">X</div>
                                <div class="preview-cell">O</div>
                                <div class="preview-cell">X</div>
                            </div>
                        </div>
                        <span class="theme-name">Candy</span>
                    </div>
                    <div class="theme-option" data-theme="midnight">
                        <div class="theme-preview theme-midnight">
                            <div class="preview-board">
                                <div class="preview-cell">X</div>
                                <div class="preview-cell">O</div>
                                <div class="preview-cell">X</div>
                            </div>
                        </div>
                        <span class="theme-name">Midnight</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Menu -->
        <main id="mainMenu" class="main-menu">
            <div class="menu-container">
                <div class="menu-card">
                    <h2 class="menu-title">Choose Game Mode</h2>
                    <div class="menu-buttons">
                        <button class="menu-btn primary" id="playAIBtn">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M12 16v-4m0-4h.01"/>
                            </svg>
                            <span>Play vs AI</span>
                            <p class="btn-description">Practice against computer</p>
                        </button>
                        <button class="menu-btn primary" id="createRoomBtn">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                                <circle cx="9" cy="7" r="4"/>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87m-4-12a4 4 0 0 1 0 7.75"/>
                            </svg>
                            <span>Create Private Room</span>
                            <p class="btn-description">Play with a friend</p>
                        </button>
                        <button class="menu-btn primary" id="joinRoomBtn">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4m-5-4l-5-5 5-5m-5 5h12"/>
                            </svg>
                            <span>Join Room</span>
                            <p class="btn-description">Enter room code</p>
                        </button>
                        <button class="menu-btn secondary" id="matchmakingBtn">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M8 14s1.5 2 4 2 4-2 4-2"/>
                                <line x1="9" y1="9" x2="9.01" y2="9"/>
                                <line x1="15" y1="9" x2="15.01" y2="9"/>
                            </svg>
                            <span>Random Matchmaking</span>
                            <p class="btn-description">Find an opponent online</p>
                        </button>
                    </div>
                    <div class="menu-stats">
                        <div class="stat-item">
                            <span class="stat-value" id="totalWins">0</span>
                            <span class="stat-label">Wins</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" id="totalGames">0</span>
                            <span class="stat-label">Games</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" id="winRate">0%</span>
                            <span class="stat-label">Win Rate</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Game Screen -->
        <div id="gameScreen" class="game-screen hidden">
            <div class="game-container">
                <!-- Game Info Bar -->
                <div class="game-info-bar">
                    <div class="player-info player-x">
                        <div class="player-avatar">X</div>
                        <div class="player-details">
                            <span class="player-name" id="playerXName">Player X</span>
                            <span class="player-status" id="playerXStatus">Waiting...</span>
                        </div>
                    </div>
                    <div class="game-status">
                        <div class="timer-container">
                            <svg class="timer-circle" width="60" height="60">
                                <circle cx="30" cy="30" r="25" />
                                <circle cx="30" cy="30" r="25" id="timerProgress" />
                            </svg>
                            <span class="timer-text" id="timerText">60</span>
                        </div>
                        <p class="turn-indicator" id="turnIndicator">Waiting for opponent...</p>
                    </div>
                    <div class="player-info player-o">
                        <div class="player-details">
                            <span class="player-name" id="playerOName">Player O</span>
                            <span class="player-status" id="playerOStatus">Waiting...</span>
                        </div>
                        <div class="player-avatar">O</div>
                    </div>
                </div>

                <!-- Game Board -->
                <div class="board-wrapper">
                    <div id="gameBoard" class="game-board">
                        <div class="cell" data-index="0"></div>
                        <div class="cell" data-index="1"></div>
                        <div class="cell" data-index="2"></div>
                        <div class="cell" data-index="3"></div>
                        <div class="cell" data-index="4"></div>
                        <div class="cell" data-index="5"></div>
                        <div class="cell" data-index="6"></div>
                        <div class="cell" data-index="7"></div>
                        <div class="cell" data-index="8"></div>
                    </div>
                    <svg class="winning-line" id="winningLine" width="100%" height="100%">
                        <line x1="0" y1="0" x2="0" y2="0" stroke-width="5" />
                    </svg>
                </div>

                <!-- Game Controls -->
                <div class="game-controls">
                    <button class="control-btn" id="restartBtn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="23 4 23 10 17 10"/>
                            <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
                        </svg>
                        Restart
                    </button>
                    <button class="control-btn" id="leaveGameBtn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                            <polyline points="16 17 21 12 16 7"/>
                            <line x1="21" y1="12" x2="9" y2="12"/>
                        </svg>
                        Leave Game
                    </button>
                </div>
            </div>

            <!-- Chat Panel -->
            <div class="chat-panel" id="chatPanel">
                <div class="chat-header">
                    <h3>Chat</h3>
                    <button class="chat-toggle" id="chatToggle">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                        </svg>
                    </button>
                </div>
                <div class="chat-messages" id="chatMessages">
                    <div class="chat-message system">
                        <span>Welcome to the game!</span>
                    </div>
                </div>
                <div class="chat-input-container">
                    <input type="text" id="chatInput" placeholder="Type a message..." maxlength="200">
                    <button id="sendChatBtn">Send</button>
                </div>
                <div class="quick-reactions">
                    <button class="reaction-btn" data-reaction="üëç">üëç</button>
                    <button class="reaction-btn" data-reaction="üòä">üòä</button>
                    <button class="reaction-btn" data-reaction="üî•">üî•</button>
                    <button class="reaction-btn" data-reaction="üëè">üëè</button>
                </div>
            </div>
        </div>

        <!-- AI Difficulty Modal -->
        <div id="aiModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Select AI Difficulty</h2>
                    <button class="close-btn" id="closeAIModal">&times;</button>
                </div>
                <div class="difficulty-grid">
                    <button class="difficulty-btn" data-difficulty="easy">
                        <span class="difficulty-icon">üòä</span>
                        <span class="difficulty-name">Easy</span>
                        <span class="difficulty-reward">+2 pts</span>
                        <p class="difficulty-desc">Random moves, perfect for beginners</p>
                    </button>
                    <button class="difficulty-btn" data-difficulty="normal">
                        <span class="difficulty-icon">üôÇ</span>
                        <span class="difficulty-name">Normal</span>
                        <span class="difficulty-reward">+5 pts</span>
                        <p class="difficulty-desc">Basic strategy and defense</p>
                    </button>
                    <button class="difficulty-btn" data-difficulty="hard">
                        <span class="difficulty-icon">üòé</span>
                        <span class="difficulty-name">Hard</span>
                        <span class="difficulty-reward">+15 pts</span>
                        <p class="difficulty-desc">Strategic plays with minimax</p>
                    </button>
                    <button class="difficulty-btn" data-difficulty="insane">
                        <span class="difficulty-icon">ü§ñ</span>
                        <span class="difficulty-name">Insane</span>
                        <span class="difficulty-reward">+25 pts</span>
                        <p class="difficulty-desc">Unbeatable perfect AI</p>
                    </button>
                </div>
            </div>
        </div>

        <!-- Room Creation Modal -->
        <div id="roomModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Create Private Room</h2>
                    <button class="close-btn" id="closeRoomModal">&times;</button>
                </div>
                <div class="room-form">
                    <div class="form-group">
                        <label>Room Settings</label>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="allowSpectators" checked>
                                <span>Allow Spectators</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="enableTimer" checked>
                                <span>Enable Turn Timer (60s)</span>
                            </label>
                        </div>
                    </div>
                    <button class="btn-primary" id="createRoomConfirm">Create Room</button>
                </div>
                <div id="roomCodeDisplay" class="room-code-display hidden">
                    <p>Share this code with your friend:</p>
                    <div class="code-container">
                        <span class="room-code" id="roomCode">------</span>
                        <button class="copy-btn" id="copyCodeBtn" title="Copy to clipboard">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                            </svg>
                        </button>
                    </div>
                    <p class="waiting-text">Waiting for opponent to join...</p>
                </div>
            </div>
        </div>

        <!-- Join Room Modal -->
        <div id="joinModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Join Private Room</h2>
                    <button class="close-btn" id="closeJoinModal">&times;</button>
                </div>
                <div class="room-form">
                    <div class="form-group">
                        <label>Enter Room Code</label>
                        <input type="text" id="roomCodeInput" placeholder="Enter 6-character code" maxlength="6" class="code-input">
                    </div>
                    <button class="btn-primary" id="joinRoomConfirm">Join Room</button>
                    <p class="error-message hidden" id="joinError">Invalid room code</p>
                </div>
            </div>
        </div>

        <!-- Game Result Modal -->
        <div id="resultModal" class="modal hidden">
            <div class="modal-content result-modal">
                <div class="result-content">
                    <div class="result-icon" id="resultIcon">üéâ</div>
                    <h2 class="result-title" id="resultTitle">You Win!</h2>
                    <p class="result-points" id="resultPoints">+10 Points</p>
                    <div class="result-stats">
                        <div class="result-stat">
                            <span class="stat-label">Game Time</span>
                            <span class="stat-value" id="gameTime">1:23</span>
                        </div>
                        <div class="result-stat">
                            <span class="stat-label">Total Moves</span>
                            <span class="stat-value" id="totalMoves">7</span>
                        </div>
                        <div class="result-stat">
                            <span class="stat-label">Avg Move Time</span>
                            <span class="stat-value" id="avgMoveTime">11s</span>
                        </div>
                    </div>
                    <div class="result-actions">
                        <button class="btn-primary" id="playAgainBtn">Play Again</button>
                        <button class="btn-secondary" id="backToMenuBtn">Main Menu</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Matchmaking Screen -->
        <div id="matchmakingScreen" class="matchmaking-screen hidden">
            <div class="matchmaking-container">
                <div class="matchmaking-spinner">
                    <div class="spinner"></div>
                </div>
                <h2>Finding an Opponent...</h2>
                <p class="matchmaking-info">
                    <span id="queuePosition">Position in queue: 1</span><br>
                    <span id="estimatedWait">Estimated wait: ~30s</span>
                </p>
                <button class="btn-secondary" id="cancelMatchmaking">Cancel</button>
            </div>
        </div>
    </div>

    <script src="js/sounds.js"></script>
    <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
    <script src="js/themes.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/game.js"></script>
</body>
</html>
